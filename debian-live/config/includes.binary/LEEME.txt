Clone-Wars Live
2014, July 12 - v0.12


------------------------------------------------------------------------


  1. Clone-Wars Live
    1.1. ¿Qué es una distribución "Live"?
    1.2. Orientación de Clone-Wars Live
    1.3. Base tecnológica
    1.4. Requisitos de hardware
    1.5. Licencia
  2. Historial de versiones
  3. Hardware probado con la distribución
    3.1. Equipos
    3.2. Tarjetas controladoras
  4. Programas específicos incluidos en la distribución
    4.1. Modelado 3D
    4.2. Herramientas para trabajar con objetos 3D
    4.3. Laminado de objetos 3D
    4.4. Control de impresora 3D
    4.5. Programación de Arduino
    4.6. Diseño de circuitos
  5. Instalación de Clone-Wars Live
    5.1. Grabación a DVD
    5.2. Copia a un dispositivo de almacenamiento USB
      5.2.1. Utilizando GNU/Linux
      5.2.2. Utilizando MAC OSX
      5.2.3. Utilizando MS Windows
  6. Uso de persistencia para los datos del usuario
  7. Usuarios
  8. Problemas notificados pendientes de solución
  9. Agradecimientos y colaboraciones


------------------------------------------------------------------------


  1. Clone-Wars Live
  ==================


	1.1. ¿Qué es una distribución "Live"?
	=====================================

  Una distribución "Live" es un un conjunto formado por un sistema operativo, programas adicionales y configuraciones, que está preparado para arrancar y funcionar desde un dispositivo extraible (CD/DVD-ROM, memoria o disco duro USB, etc), permitiendo que se pueda trabajar con él sin afectar al sistema operativo y a los programas instalados en el equipo en el que se ejecuta o a sus configuraciones.


	1.2. Orientación de Clone-Wars Live
	===================================

  La idea detrás del origen de Clone-Wars Live es la de proporcionar un entorno de trabajo con las herramientas más habituales para el trabajo con impresoras 3d (diseño de piezas e impresión), Arduino, etc, así como documentación relacionada. 

  Los puntos más importantes a tener en cuenta a la hora de desarrollarla han sido:

  - Que sea un sistema libre. Ha de permitir su libre uso, modificación y redistribución a cualquier persona que lo quiera utilizar.

  - Un consumo de recursos bajo. Es importante que los recursos necesarios para su funcionamiento sean bajos, ya que esto posibilitará su uso en una mayor cantidad de equipos al mismo tiempo que permitirá la reutilización y aprovechamiento de máquinas más antiguas.  


	1.3. Base tecnológica
	=====================

  Para desarrollar la distribución se ha recurrido a emplear Debian GNU/Linux[1] como sistema operativo base. Es una de las distribuciones GNU/linux más antiguas que existen actualmente, que goza de una salud excelente tal y como lo demuestra el hecho de que se siga usando como base para muchas distribuciones, algunas de ellas muy populares, como es el caso de Ubuntu[2].

  El sistema utilizado para el desarrollo es "Debian Live"[3], un sistema propio de Debian para la creación de sistemas "live" personalizados usando como base la propia Debian GNU/Linux en cualquiera de sus ramas.

  Enlaces:

    [1] - [[www.debian.org|http://www.debian.org]]
    [2] - [[www.ubuntu.com|http://www.ubuntu.com]]
    [3] - [[live.debian.net|http://live.debian.net]]


	1.4. Requisitos de hardware
	===========================

  Teniendo en cuenta los recursos de hardware que tiene cualquier equipo que compremos hoy en día, los requisitos de Clone-Wars Live son bastante modestos, por lo que únicamente enumeramos los requisitos mínimos recomendados para poder trabajar con la distribución. Aunque el sistema funcione con muchos menos recursos de los expuestos, no es recomendable si lo que queremos es poder trabajar con un mínimo de comodidad en la mayoría de los programas incluidos:

  - Memoria: la mínima cantidad recomendada serían 512MB de memoria RAM

    En caso de que queramos mejorar el rendimiento, si tenemos espacio disponible en el disco duro podemos recurrir a crear una partición de "memoria de intercambio" o "swap" en él y otra partición para "persistencia de datos". De esta manera liberamos parte de la memoria RAM y la dejamos disponible para uso del sistema operativo y los programas.

  - Procesador: el mínimo procesador recomendado para trabajar sería un Intel Pentium3/Pentium4 o equivalente.


	1.5. Licencia
	=============


  2. Historial de versiones
  =========================

  - 2014.01.09: Primera versión alpha

  - 2014.01.14: Segunda versión alpha

  - 2014.02.01: Tercera versión alpha

  - 2014.02.13: Cuarta versión alpha

    - Integración de Debian-installer en el menú de arranque
    - Actualización de RepetierHost a la versión 0.95F
    - Añadidos los paquetes: chromium, chromium-l10n, geda-xgsch2pcb, xchat
    - Desterrados los paquetes: htop, mc
    - Eliminados los paquetes: dia, firefox, gigolo, thunderbird
    - Corregido el soporte de Sanguinololu en el IDE de Arduino

  - 2014.02.19: Quinta versión alpha

    - Añadido Netfabb Basic 5.1.0
    - Actualización de Slic3r a la versión 1.0.0RC3
    - Añadidos los paquetes: unetbootin, unetbootin-translations, vinagre, x11vnc
    - Creado directorio para acceder a configuraciones desde el escritorio

  - 2014.03.23: Sexta versión alpha

    - Añadido directorio con el código de los firmwares base "/usr/local/share/firmwares-base"
    - Añadido directorio con ejemplos y objetos de calibración "/usr/local/share/ejemplos"
    - Añadida versión del firmware Marlin de F.Malpartida para el soporte del LCD en la SAV
    - Añadida librería v1.2.1 New LiquidCrystal v1.2.1 de F.Malpartida
    - Actualización de OpenSCAD a la versión 2014.03
    - Añadida extensión Gcodetools v1.7 para InkScape
    - Actualización de Cura a la versión 14.03

  - 2014.07.12: Séptima versión alpha

    - Migrado todo el sistema de generación de la distro a GitHub
    - Empaquetado todo el software necesario que no estaba disponible en paquetes .deb
    - Restructuración del menú de arranque para hacerlo multi-idioma
    - Cambio en scripts de arranque para permitir hacer personalizaciones en función del
        idioma elegido
    - Desactivación del instalador a disco duro
    - Eliminado directorio de ejemplos, pendiente de restucturación
    - Actualización de Printrun a la versión 2014.01.26
    - Actualización de Cura a la versión 14.7
    - Actualización de Netfabb Basic a la versión 5.1.1
    - Actualización de Slic3r a la versión 1.1.6
    - Actualización de FreeCAD a la versión 0.14.3692
    - Añadido Fitzing 0.8.7b
    - Inclusión de Graphviz para poder ver las dependencias en FreeCAD
    - Backport de PySerial desde Debian testing e inclusión de parche para permitir
        conexiones a cualquier velocidad
    - Añadido soporte de flash para chromium
    - Corrección en la instalación del firmware para las tarjetas wireless Intel IPW


  3. Hardware probado con la distribución
  =======================================


	3.1. Equipos
	============

   - Apple MacBook Air 11" 2011: OK
   - Apple MacBook Pro 5.1 15" late 2008: No detecta el arranque. KO
   - Apple MacBook Pro Retina 11.2 15" late 2013: Arranca con algunos problemas, pero no detecta la tarjeta WiFi
   - Apple MacMini 2012: Arranca con algunos problemas, pero no detecta la tarjeta WiFi
   - Asus A55VD: OK
   - Asus EeePC T101MT: OK
   - Clevo D400E: OK
   - Dell Inspiron n5050: Problema con el instalador a disco duro. Modo "Live" OK
   - Dell Latitude D610: Interfaz WiFi es "eth*" no "wlan*". OK
   - Dell Latitude E6400: OK
   - HP Compaq NX9030: Interfaz WiFi es "eth*" no "wlan*". OK
   - Lenovo n500: OK
   - Lenovo x200s: OK
   - PackardBell EasyNote A7738: Interfaz WiFi es "eth*" no "wlan*". OK


	3.2. Tarjetas controladoras
	===========================

   - Arduino Mega 2560 + RAMPS 1.4
   - Gen7 1.4.1
   - Gen7 1.5
   - Megatronics v3
   - Sanguinololu 1.3a
   - SAV MKI + SAV LCD


  4. Programas específicos incluidos en la distribución
  =====================================================


	4.1. Modelado 3D
	================

   - Blender 2.63
   - FreeCAD 0.14
   - LibreCAD 1.0.2
   - OpenSCAD 2014.03
   - Wings 3D 1.4.1


	4.2. Herramientas para trabajar con objetos 3D
	==============================================

   - Netfabb Basic 5.1.1


	4.3. Laminado de objetos 3D
	===========================

   - Skeinforge 2012.03.15
   - Slic3r 1.1.6


	4.4. Control de impresora 3D
	============================

   - Cura 14.07
   - Printrun 2014.01.26
   - Repetier-Host 0.95F


	4.5. Programación de Arduino
	============================

   - Arduino IDE 1.0.5


	4.6. Diseño de circuitos
	========================

   - Fitzing 0.8.7b
   - gEDA 1.6.2-4.3
   - KiCAD 2012-04.16.27
   - PCB Designer 20110918


  5. Instalación de Clone-Wars Live
  =================================

  Existen diferentes procedimientos para pasar el contenido del archivo .iso que nos descargamos a un medio físico. Dichos procedimientos van a depender del medio físico en el que queramos instalar la distribución, así como del sistema operativo que estemos empleando para realizar el proceso.

  A continuación se detallan algunos de los procedimientos más comunes.  


	5.1. Grabación a DVD
	====================

  No nos va a representar ningún problema en cuanto a S.O. o plataforma, puesto que cualquier programa de grabación de DVD que permita grabar imágenes .iso nos va a servir para realizar la grabación.


	5.2. Copia a un dispositivo de almacenamiento USB
	=================================================


		5.2.1. Utilizando GNU/Linux
		===========================

    - Con el comando "dd":

      Lo primero que debemos hacer es enchufar la unidad de almacenamiento que queremos usar para copiar en élla la distribución y que debe ser de tamaño suficiente para albergarla. Una vez enchufada, desde una consola con el comando "dmesg" podemos ver las últimas líneas de mensajes del kernel para obtener el dispositivo de sistema que se le ha asignado. 

      Una vez que conocemos el dispositivo de sistema y tenemos descargado el fichero .iso con la distribución, podemos hacer la copia de dos maneras diferentes:

      - La más correcta, sería utilizando los comandos "isoinfo" y "dd":

      Por ejemplo, para obtener la información del fichero "cwlive-alpha3.iso", ejecutamos el siguiente comando:  

        $ isoinfo -d -i cwlive-alpha3.iso
         
        CD-ROM is in ISO 9660 format
        System id: 
        Volume id: CloneWars_20140201
        Volume set id: 
        Publisher id: CLONEWARS
        Data preparer id: LIVE-BUILD 3.0.5-1; HTTP://PACKAGES.QA.DEBIAN.ORG/LIVE-BUILD
        Application id: CLONEWARS LIVECD
        Copyright File id: 
        Abstract File id: 
        Bibliographic File id: 
        Volume set size is: 1
        Volume set sequence number is: 1
        Logical block size is: 2048
        Volume size is: 749984
        El Torito VD version 1 found, boot catalog is in sector 76
        Joliet with UCS level 3 found
        Rock Ridge signatures version 1 found
        Eltorito validation header:
            Hid 1
            Arch 0 (x86)
            ID ''
            Key 55 AA
            Eltorito defaultboot header:
                Bootid 88 (bootable)
                Boot media 0 (No Emulation Boot)
                Load segment 0
                Sys type 0
                Nsect 4
                Bootoff 19B32 105266


      De la información que nos devuelve, nos van a interesar los valores de "Logical block size" y "Volume size".

      ATENCION: el siguiente paso elimina la tabla de particiones y toda la información contenida en el dispositivo que indiquemos, por eso es muy importante asegurarnos de que es el dispositivo correcto :ATENCIÓN

      Si tenemos un pendrive en el que queremos copiar la distribución y al que se le ha asignado el dispositivo de sistema "sdb", tendremos que ejecutar con permisos de superusuario (como root o con sudo) el siguiente comando:

        # dd if="ruta al archivo descargado" bs="Logical block size" count="Volume size" of=/dev/"dispositivo de sistema del destino"
  

      Usando los datos de el ejemplo anterior, el comando final quedaría así:

        # dd if=cwlive-alpha3.iso bs=2048 count=749984 of=/dev/sdb
  


      - La más rápida, y que normalmente suele funcionar, usando únicamente el comando "dd". 

      ATENCION: el siguiente paso elimina la tabla de particiones y toda la información contenida en el dispositivo que indiquemos, por eso es muy importante asegurarnos de que es el dispositivo correcto :ATENCIÓN

      Si tenemos un pendrive en el que queremos copiar la distribución y al que se le ha asignado el dispositivo de sistema "sdb", tendremos que ejecutar con permisos de superusuario (como root o con sudo) el siguiente comando:

        # dd if="ruta al archivo descargado" of=/dev/"dispositivo de sistema del destino"
  

      Usando los datos de el ejemplo anterior, el comando final quedaría así:

        # dd if=cwlive-alpha3.iso of=/dev/sdb
  

      A partir de este momento la distribución ya estaría instalada. A la hora de querer arrancarla tendremos que asegurarnos de que nuestro equipo permita el arranque desde dispositivos "USB" y que, en la "BIOS" del mismo, esté seleccionado correctamente el orden de la secuencia de arranque.

    - Con la utilidad "UNetbootin":

      Como en el apartado anterior, el primer paso será enchufar la unidad de almacenamiento que queremos usar para copiar en élla la distribución. Necesitaremos que exista una partición con sistema de ficheros "FAT32" con espacio suficiente para albergarla, en caso de no ser así tendremos que crearla antes de poder continuar con el proceso.

      Si hemos creado nosotros la partición ahora ya conoceremos el dispositivo de sistema que tiene asignado la partición, si no es así podrémos averiguarlo desde una consola con el comando "dmesg" que nos mostrará las últimas líneas de mensajes del kernel. Además, la partición deberá estar montada para poder continuar con el proceso.

      Una vez que conocemos el dispositivo de sistema de la partición, que la partición está montada y que tenemos descargado el fichero .iso con la distribución, ejecutaremos la utilidad "UNetbootin". En caso de que no la tengamos disponible en el sistema, podemos descargarla de [1].

      Los pasos a seguir una vez lanzada la aplicación son:

      - Seleccionar "DiscoImagen", formato "ISO" e introducir la ruta al fichero con la iso de la distribución. Esto último se puede hacer a través del explorador de archivos incorporado.

      - Seleccionar el tipo "Unidad USB" y como "Unidad" el dispositivo de sistema asignado a la partición en donde vamos a instalarlo que, normalmente, se puede seleccionar desde el propio botón desplegable.

      - Pulsar el botón "Aceptar" y esperar a que termine el proceso.

      La utilidad "UNetbootin" hace una modificación en la configuración del menú de arranque que lo deja en un estado bastante poco operativo, por lo que para restaurarlo a su estado normal tendremos quer realizar la siguiente operación:

      - Dentro del directorio raíz de la unidad de almacenamiento que hemos utilizado para copiar la distribución, existe un directorio con nombre "syslinux" y que contiene un fichero con nombre "syslinux.cfg". Lo que tendremos que hacer es borrar dicho fichero, para a continuación proceder a renombrar el fichero "syslinux.cfg.orig" dejándolo con el mismo nombre que tenía el que acabamos de borrar, es decir, "syslinux.cfg".

      A partir de este momento la distribución ya estaría instalada. A la hora de querer arrancarla tendremos que asegurarnos de que nuestro equipo permita el arranque desde dispositivos "USB" y que, en la "BIOS" del mismo, esté seleccionado correctamente el orden de la secuencia de arranque.

      Enlaces:

        [1] - [[unetbootin.sourceforge.net|http://unetbootin.sourceforge.net]]


		5.2.2. Utilizando MAC OSX
		=========================

    En equipos con MAC OSX podemos usar los mismos métodos que en GNU/Linux, variando únicamente el nombre del dispositivo en el que se va a escribir la imagen.

    Un detalle a tener en cuenta es que, después de realizar múltiples pruebas con diferentes modelos de equipos Apple, los pendrives generados con "UNetbootin" no siempre arrancaban en dichos equipos, por lo que para estar seguros es recomendable grabar la imagen utilizando el comando "dd".


		5.2.3. Utilizando MS Windows
		============================

    Para los equipos con MS Windows también podemos recurrir a emplear "UNetbootin", al igual que en el caso de MAC OSX, la única diferencia en el proceso respecto a lo mencionado para GNU/Linux será el nombre de la unidad en la que vamos a escribir la imagen.


  6. Uso de persistencia para los datos del usuario
  =================================================

  Para conservar la información, archivos, configuraciones, etc o los cambios que realicemos entre reinicios de la distribución "Live", podemos recurrir al uso de particiones auxiliares en las que dicha información quede almacenada de manera permanente. Podemos elegir entre dos clases de persistencia:

  - De datos de sistema: Se almacenan todos los cambios que se realicen en el sistema, incluidos los de los directorios del usuario.

  - De datos de usuario: Se almacenan únicamnete los cambios que se realicen en los directorios del usuario.

  Para activarla necesitaremos crear una partición adicional, en el espacio libre en el dispositivo USB o en el disco duro, usando un sistema de ficheros "ext3" o "ext4" y asignándole una de las siguientes etiquetas de volumen:

  - "live-rw": para tener persistencia de datos de sistema.

  - "home-rw": para tener persistencia de datos de usuario.

  Si se crean desde la propia distribución "Live", será necesario el reinicio del sistema para que reconozca en el arranque la nueva partición y genere la estructura de directorios y ficheros necesaria para su funcionamiento.


  7. Usuarios
  ===========

  Los usuarios definidos en la distribución, tanto en modo "Live" como instalada en disco duro, son los siguientes:

  - "root": está deshabilitado por defecto, por lo que para ejecutar acciones o comandos con privilegios de superusuario tendremos que recurrir al uso de los comandos "sudo" o "gksudo".

  - "cw": con contraseña idéntica al nombre de usuario, es decir "cw", es el usuario por defecto de la distribución. Cuando la distribución está instalada en el disco duro, se nos pedirá la contraseña para la ejecución de ciertos comandos o acciones, no siendo así en modo "Live".


  8. Problemas notificados pendientes de solución
  ===============================================

  - Arduino IDE: la lista de tarjetas controladoras no se desplaza cuando llega al borde de la pantalla, lo cual puede representar un problema con resoluciones pequeñas de pantalla . Está reconocido por los desarrolladores y se solucionará en versiones posteriores que por el momento únicamente están en fase beta.

  - Debian Live: [Solucionado] no detecta redes inalámbricas en un portátil HP Compaq NX9030, con tarjeta Intel 2200BG el interfaz Wi-Fi no es "wlan*" sino "eth*" y hay que cambiarlo en la configuración de "wicd" (Jordi). 

  - Debian Installer: bloquea el equipo al intentar detectar las tarjetas de red durante la instalación a disco duro en un portátil Dell Inspiron n5050 (Cardiak Brain).

  - Debian Installer: [Solucionado] errores al intentar detectar las tarjetas de red durante la instalación a disco duro en un portátil Acer (Furanshishouco).

  - Pronterface: [Solucionado] con la versión 2013.10.19 no se visualiza la rejilla en el modo de vista compacta, aunque si funciona correctamente en la versión etiquetada como "stable" (Xoan).

  - Slic3r: [Ver sección sobre casos de uso] a la hora de generar un archivo ".gcode" partiendo de un archivo ".stl", trata de hacerlo en el mismo directorio que el archivo ".stl". Esto causa un problema con los archivos de ejemplo, que están en un directorio sin permisos de escritura para el usuario "cw" (Iceflow).


  9. Agradecimientos y colaboraciones
  ===================================

